<!--
# Localizing your app
-->
# 다국어 적용하기

{@searchKeywords i18n}
{@a angular-i18n}

<!--
*Internationalization* (i18n) is the process of designing and preparing your app to be usable in different locales around the world.
*Localization* is the process of building versions of your app for different locales, including extracting text for translation into different languages, and formatting data for particular locales.

A *locale* identifies a region (such as a country) in which people speak a particular language or language variant. The locale determines the formatting and parsing of dates, times, numbers, and currencies as well as measurement units and the translated names for time zones, languages, and countries.

<div class="alert is-helpful">

Create an adaptable user interface for all of your target locales that takes into consideration the differences in spacing for different languages. For details, see [How to approach internationalization](https://marketfinder.thinkwithgoogle.com/intl/en_us/guide/how-to-approach-i18n/#overview "How to approach internationalization").

</div>

Use Angular to internationalize your app:

* Use built-in pipes to display dates, numbers, percentages, and currencies in a local format.
* Mark text in component templates for translation.
* Mark plural forms of expressions for translation.
* Mark alternate text for translation.

After preparing your app for an international audience, use the [Angular CLI](cli) to  localize your app by performing the following tasks:

* Use the CLI to extract marked text to a _source language_ file.
* Make a copy of this file for each language, and send these _translation files_ to a translator or service.
* Use the CLI to merge the finished translation files when building your app for one or more locales.

<div class="alert is-helpful">

  To explore the sample app with French translations used in this guide, see the <live-example></live-example>.

</div>
-->
*국제화(Internationalization, i18n)*는 애플리케이션을 다른 국가에 적합하도록 설계하고 준비하는 과정입니다.
그리고 *지역화(Localization, l10n)*는 각 지역 언어에 맞게 애플리케이션을 빌드하는 과정을 의미합니다.
언어를 변환하기 위해 앱에서 문자열을 추출하고 각 지역에 맞게 데이터 형식을 변경하는 것도 지역화에 포함됩니다.

*지역(locale)*은 특정 언어를 사용하는 국가나 지역을 뜻합니다.
지역마다 날짜나 시간, 숫자, 통화를 표시하는 형식이 다르며, 사용하는 단위와 타임존, 언어, 국가명을 다르게 표현하기도 합니다.

<div class="alert is-helpful">

전세계 사용자에게 적합한 앱을 제공하려면 각 언어별 차이점에 대해 깊이있게 고민해야 합니다.
자세한 내용은 [국제화를 어떻게 적용해야 하는가](https://marketfinder.thinkwithgoogle.com/intl/en_us/guide/how-to-approach-i18n/#overview "How to approach internationalization") 문서를 참고하세요.

</div>

Angular에서는 이런 방식으로 국제화를 적용합니다:

* 기본 파이프를 사용하면 날짜, 숫자, 퍼센트, 통화를 지역별 형식에 맞게 표시할 수 있습니다.
* 컴포넌트 템플릿에 있는 문자열 중 번역해야 할 문자열을 지정합니다.
* 번역할 문자열의 복수형 문법을 정의합니다.
* 번역에 적용할 문자열을 정의합니다.

앱에서 이런 준비를 모두 끝내고 나면 [Angular CLI](cli)를 사용해서 이런 작업을 수행할 수 있습니다:

* 번역하는 것으로 지정한 문자열을 _소스 언어(source language)_ 파일로 추출할 수 있습니다.
* 이 파일을 지원해야 할 언어마다 복사한 후에 번역자나 번역 서비스를 활용해서 _번역 파일(translation file)_ 로 만듭니다.
* 애플리케이션에 번역 파일을 적용하며 앱을 빌드합니다.

<div class="alert is-helpful">

이 문서는 앱을 프랑스어로 번역하는 예제에 대해 다룹니다.
예제 앱이 동작하는 모습은 <live-example></live-example>에서 직접 확인하거나 다운받아 확인할 수 있습니다.

</div>


<!--
## Prerequisites
-->
## 사전지식

<!--
To prepare your app for translations, you should have a basic understanding of the following:

* [Templates](guide/glossary#template "Definition of a template")
* [Components](guide/glossary#component "Definition of a component")
* [Angular CLI](guide/glossary#command-line-interface-cli "Definition of CLI") command-line tool for managing the Angular development cycle
* [Extensible Markup Language (XML)](https://www.w3.org/XML/ "W3C: Extensible Markup Language (XML)") used for translation files
-->
애플리케이션을 번역하려면 이런 내용에 대해 먼저 이해하고 있는 것이 좋습니다:

* [템플릿](guide/glossary#template "Definition of a template")
* [컴포넌트](guide/glossary#component "Definition of a component")
* Angular 개발 단계 전반에 활용하는 [Angular CLI](guide/glossary#command-line-interface-cli "Definition of CLI")
* 번역 파일에 사용되는 [확장 마크업 언어 (Extensible Markup Language, XML)](https://www.w3.org/XML/ "W3C: Extensible Markup Language (XML)")


<!--
## Steps to localize your app
-->
## 지역화를 적용하는 과정

<!--
To localize your app, follow these general steps:

1. [Add the localize package](#setting-up-cli).
2. [Refer to locales by ID](#setting-up-locale).
3. [Format data based on locale](#i18n-pipes).
4. [Prepare templates for translations](#Template-translations).
5. [Work with translation files](#ng-xi18n).
6. [Merge translations into the app](#merge).
7. [Deploy multiple locales](#deploy-locales).

While following these steps, you can [explore the translated example app](#app-pre-translation).

The following are optional practices that may be required in special cases:

* [Set the source locale manually](#set-source-manually) if you need to set the [LOCALE_ID](api/core/LOCALE_ID "API reference for LOCALE_ID") token.
* [Import global variants of the locale data](#import-locale) for extra locale data.
* [Manage marked text with custom IDs](#custom-id) if you require more control over matching translations.
-->
애플리케이션에 지역화를 적용하는 순서는 일반적으로 이렇습니다:

1. [지역화 지원 패키지를 추가합니다](#setting-up-cli)
2. [지역을 지정합니다.](#setting-up-locale)
3. [지역에 맞게 데이터 형식을 변환합니다.](#i18n-pipes)
4. [번역을 적용할 수 있도록 템플릿을 수정합니다.](#Template-translations)
5. [소스 언어 파일을 번역합니다.](#ng-xi18n)
6. [번역 파일을 앱에 적용합니다.](#merge)
7. [지역에 맞게 앱을 배포합니다.](#deploy-locales)

이 문서에서는 각 단계를 어떻게 진행하는지 [예제 앱을 작업해보며](#app-pre-translation) 알아봅시다.

이 과정 외에 추가로 필요하다면 이런 작업이 추가될 수도 있습니다:

* [LOCALE_ID](api/core/LOCALE_ID "API reference for LOCALE_ID") 토큰을 지정해야 한다면 [수동으로 지역 ID 설정하기](#set-source-manually) 섹션을 참고하세요.
* 지역 관련 데이터가 더 필요하면 [지역 관련 데이터 로드하기](#import-locale) 섹션을 참고하세요.
* 번역 파일을 효율적으로 관리하려면 [커스텀 ID로 번역 대상 문자열 관리하기](#custom-id) 섹션을 참고하세요.


{@a setting-up-cli}
{@a add-localize}

<!--
## Add the localize package
-->
## 지역화 지원 패키지 추가하기

<!--
To take advantage of Angular's localization features, use the Angular CLI to add the `@angular/localize` package to your project:

<code-example language="sh" class="code-shell">
  ng add @angular/localize
</code-example>

This command updates your project's `package.json` and `polyfills.ts` files to import the `@angular/localize` package.

<div class="alert is-helpful">

For more information about `package.json` and polyfill packages, see [Workspace npm dependencies](guide/npm-packages).

</div>

If `@angular/localize` is not installed, the Angular CLI may generate an error when you try to build a localized version of your app.
-->
Angular가 제공하는 지역화 기능을 사용하려면 Angular CLI 명령을 실행해서 `@angular/localize` 패키지를 프로젝트에 추가해야 합니다:

<code-example language="sh" class="code-shell">
  ng add @angular/localize
</code-example>

이 명령을 실행하면 프로젝트 `package.json` 파일과 `polyfills.ts` 파일이 자동으로 `@angular/localize` 패키지를 로드하도록 변경됩니다.

<div class="alert is-helpful">

`package.json` 파일과 폴리필 패키지에 대해 자세하게 알아보려면 [워크스페이스 npm 패키지](guide/npm-packages) 문서를 참고하세요.

</div>

`@angular/localize` 패키지를 설치하지 않으면 후에 다국어 버전으로 앱을 빌드할 때 에러가 발생할 수 있습니다.


{@a setting-up-locale}

{@a setting-up-the-locale-of-your-app}

<!--
## Refer to locales by ID
-->
## 지역코드 지정하기

<!--
Refer to a locale using the Unicode *locale identifier* (ID), which specifies the language, country, and an optional code for further variants or subdivisions.

<div class="callout is-helpful">
<header>Unicode locale identifiers</header>

* For a list of language codes, see [ISO 639-2](https://www.loc.gov/standards/iso639-2/ "ISO 639-2 Registration Authority").
* IDs conform to the Unicode Common Locale Data Repository (CLDR).
For more information about Unicode locale identifiers, see the [CLDR core specification](http://cldr.unicode.org/core-spec#Unicode_Language_and_Locale_Identifiers "CLDR - Unicode Common Locale Data Repository").
* CLDR and Angular base their identifiers on [BCP47 tags](http://www.rfc-editor.org/rfc/bcp/bcp47.txt "BCP47 Tags for Identifying Languages").

</div>

The ID consists of a language identifier, such as `en` for English or `fr` for French, followed by a dash (`-`) and a locale extension, such as `US` for the United States or `CA` for Canada.
For example, `en-US` refers to English in the United States, and `fr-CA` refers to French in Canada.
Angular uses this ID to find the correct corresponding locale data.

<div class="alert is-helpful">

Many countries, such as France and Canada, use the same language (French, identified as `fr`) but differ in grammar, punctuation, and formats for currency, decimal numbers, and dates.
Use a more specific locale ID, such as French for Canada (`fr-CA`), when localizing your app.

</div>

Angular by default uses `en-US` (English in the United States) as your app's source locale.

The [Angular repository](https://github.com/angular/angular/tree/master/packages/common/locales "Common locales in the Angular repository") includes common locales.
You can change your app's source locale for the build by setting the source locale in the `sourceLocale` field of your app's [workspace configuration](guide/workspace-config "Angular workspace configuration") file (`angular.json`).
The build process (described in [Merge translations into the app](#merge) in this guide) uses your app's `angular.json` file to automatically set the [`LOCALE_ID`](api/core/LOCALE_ID "API reference for LOCALE_ID") token and load the locale data.
-->
애플리케이션이 지원할 대상 지역은 언어, 국가를 구별하는 유니코드 *지역 구분자(locale identifier)*로 지정합니다.

<div class="callout is-helpful">
<header>유니코드 지역 구분자</header>

* 언어 코드 전체 목록을 확인하려면 [ISO 639-2](https://www.loc.gov/standards/iso639-2/ "ISO 639-2 Registration Authority") 문서를 참고하세요.
* ID는 모두 유니코드 공통 지역 데이터 저장소(Unicode Common Locale Data Repository, CLDR)를 따릅니다.
유니코드 지역 구분자에 대해 자세하게 알아보려면 [CLDR 코어 스펙](http://cldr.unicode.org/core-spec#Unicode_Language_and_Locale_Identifiers "CLDR - Unicode Common Locale Data Repository") 문서를 참고하세요.
* CLDR과 Angular는 모두 [BCP47 태그](http://www.rfc-editor.org/rfc/bcp/bcp47.txt "BCP47 Tags for Identifying Languages")를 따릅니다.

</div>

지역 ID는 언어 코드와 지역 코드로 구분되는데, 언어 코드는 영어인 경우 `en`, 프랑스어인 경우 `fr`이며 언어 코드 뒤에 대시 기호(`-`)를 붙인 후 지역 코드가 붙습니다.
지역 코드는 미국인 경우 `US`, 캐나다인 경우 `CA`입니다.
그래서 `en-US`라는 지역 구분자는 미국에서 사용하는 영어를 의미하며, `fr-CA`는 캐나다에서 사용하는 프랑스어를 의미합니다.
이 지역 코드는 Angular에서도 그대로 사용됩니다.

<div class="alert is-helpful">

프랑스와 캐나다같이 같은 언어(프랑스어, `fr`)를 사용하지만 문법이나 문장 부호, 통화 형식, 소수점 표기, 날짜 표기 방식이 다릅니다.
그래서 단순하게 언어 구분자만 지정하는 것보다는 최대한 구체적인(`fr-CA`) 구분자를 사용하는 것이 좋습니다.

</div>

Angular의 기본 지역 구분자는 `en-US`, 미국에서 사용하는 영어입니다.

[Angular 코드저장소](https://github.com/angular/angular/tree/master/packages/common/locales "Common locales in the Angular repository")를 보면 Angular가 제공하는 지역 코드를 확인할 수 있습니다.
Angular 애플리케이션의 기본 지역 구분자는 [워크스페이스 설정 파일](guide/workspace-config "Angular workspace configuration")인 `angular.json` 파일에서 `sourceLocale` 필드를 지정하면 변경할 수 있습니다.
그리고 아래 [앱에 번역 파일 적용하기](#merge)섹션에서 설명하겠지만, 애플리케이션을 빌드할 때 `angular.json` 파일에 설정한 대로 [`LOCALE_ID`](api/core/LOCALE_ID "API reference for LOCALE_ID") 토큰이 자동으로 설정되어 해당 지역 데이터가 로드됩니다.


{@a i18n-pipes}

<!--
## Format data based on locale
-->
## 지역에 맞게 데이터 형식 변환하기

<!--
Angular provides the following built-in data transformation [pipes](guide/glossary#pipe "Definition of a pipe") that use the [`LOCALE_ID`](api/core/LOCALE_ID "API reference for LOCALE_ID") token to format data according to the locale's rules:

* [`DatePipe`](api/common/DatePipe): Formats a date value.
* [`CurrencyPipe`](api/common/CurrencyPipe): Transforms a number to a currency string.
* [`DecimalPipe`](/api/common/DecimalPipe): Transforms a number into a decimal number string.
* [`PercentPipe`](api/common/PercentPipe): Transforms a number to a percentage string.

For example, `{{today | date}}` uses `DatePipe` to display the current date in the format for the locale in `LOCALE_ID`.

To override the value of `LOCALE_ID`, add the `locale` parameter.
For example, to force the currency to use `en-US` no matter which language-locale you set for `LOCALE_ID`, use this form: `{{amount | currency : 'en-US'}}`.
-->
Angular가 제공하는 기본 [파이프](guide/glossary#pipe "Definition of a pipe")에 [`LOCALE_ID`](api/core/LOCALE_ID "API reference for LOCALE_ID") 토큰을 사용하면 원하는 지역에 맞는 형식으로 데이터를 변환할 수 있습니다:

* [`DatePipe`](api/common/DatePipe): 일자 형식으로 변환합니다.
* [`CurrencyPipe`](api/common/CurrencyPipe): 숫자를 통화 단위로 변환합니다.
* [`DecimalPipe`](/api/common/DecimalPipe): 숫자 표기 형식을 변환합니다.
* [`PercentPipe`](api/common/PercentPipe): 숫자를 퍼센트 문자열로 변환합니다.

그래서 `DatePipe`를 사용해서 `{{today | date}}`와 같이 구현하면 애플리케이션의 `LOCALE_ID`에 해당하는 형식으로 일자가 표시됩니다.

`LOCALE_ID` 값은 `locale` 인자를 추가하면 오버라이드 할 수 있습니다.
그래서 애플리케이션에 설정된 `LOCALE_ID`와 관계없이 통화를 `en-US` 형식으로 표시하려면 `{{amount | currency : 'en-US'}}`와 같이 구현하면 됩니다.


{@a Template-translations}

<!--
## Prepare templates for translations
-->
## 템플릿 수정하기

<!--
To translate your app's templates, you need to prepare the text for a translator or translation service by marking text, attributes, and other elements with the Angular `i18n` attribute.
Follow these general steps:

1. [Mark text for translations](#i18n-attribute).
2. [Add helpful descriptions and meanings](#help-translator) to help the translator with additional information or context.
3. [Translate text not for display](#no-element).
4. [Mark element attributes for translations](#translate-attributes), such as an image's `title` attribute.
5. [Mark plurals and alternates for translation](#plurals-alternates) in order to comply with the pluralization rules and grammatical constructions of different languages.
-->
앱 템플릿에 다국어를 적용하려면 템플릿에서 Angular가 제공하는 `i18n` 어트리뷰트를 활용해서 번역할 단어와 어트리뷰트를 지정해야 합니다.
이 과정은 이렇게 진행합니다:

1. [번역할 단어를 지정합니다.](#i18n-attribute)
2. 번역자에게 문맥과 관련된 추가 정보를 제공하기 위해 [해당 문자열의 설명과 의미를 추가합니다.](#help-translator)
3. [화면에 표시되지 않는 문자열을 번역합니다.](#no-element)
4. [번역할 엘리먼트 어트리뷰트를 지정합니다.](#translate-attributes) 이미지 엘리먼트의 `title` 어트리뷰트가 이 대상입니다.
5. [복수 표현식과 대체 표현식](#plurals-alternates)을 지정합니다. 이 정보는 언어에 따라 복수를 표현하는 방식이나 문법 구성이 다를 때 활용합니다.


{@a i18n-attribute}
{@a mark-text-for-translations}

<!--
### Mark text for translations
-->
### 번역할 문자열 지정하기

<!--
Mark the static text messages in your component templates for translation using the `i18n` attribute.
Place it on every element tag with fixed text to be translated.

For example, the following `<h1>` tag displays a simple English language greeting, "Hello i18n!"

<code-example path="i18n/doc-files/app.component.html" region="greeting" header="src/app/app.component.html"></code-example>

To mark the greeting for translation, add the `i18n` attribute to the `<h1>` tag.

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute" header="src/app/app.component.html"></code-example>

<div class="alert is-helpful">

`i18n` is a custom attribute, recognized by Angular tools and compilers.
After translation, the compiler removes it. It is not an Angular directive.

</div>
-->
컴포넌트 템플릿 문자열을 번역할 대상으로 지정하려면 `i18n` 어트리뷰트를 활용하면 됩니다.
이 어트리뷰트는 번역하려고 하는 단어가 포함된 모든 엘리먼트에 추가합니다.

예를 들어 `<h1>` 태그에 영어 인사 "Hello i18n!" 라는 문자열이 있다고 합시다.

<code-example path="i18n/doc-files/app.component.html" region="greeting" header="src/app/app.component.html"></code-example>

이 문자열을 번역 대상으로 지정하려면 `<h1>` 태그에 `i18n` 어트리뷰트를 추가하면 됩니다.

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute" header="src/app/app.component.html"></code-example>

<div class="alert is-helpful">

`i18n` 어트리뷰트는 Angular 툴과 컴파일러에서 사용하는 커스텀 어트리뷰트입니다.
이 어트리뷰트는 번역 파일이 반영된 후에 컴파일러가 자동으로 제거합니다.
Angular 디렉티브와는 다릅니다.

</div>


{@a help-translator}

<!--
### Add helpful descriptions and meanings
-->
### 문자열의 의미, 추가 설명 추가하기

<!--
To translate a text message accurately, the translator may need additional information or context.
Add a _description_ of the text message as the value of the `i18n` attribute, as shown in the following example:

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-desc" header="src/app/app.component.html"></code-example>

The translator may also need to know the meaning or intent of the text message within this particular app context, in order to translate it the same way as other text with the same meaning.
Start the `i18n` attribute value with the _meaning_ and
separate it from the _description_ with the `|` character: `<meaning>|<description>`.

For example, you can add the meaning that this `<h1>` tag is a site header that needs to be translated the same way not only when used as a header, but also when referred to from another section of text:

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-meaning" header="src/app/app.component.html"></code-example>

As a result, any text marked with `site header` as the _meaning_ is translated exactly the same way.
-->
문자열을 제대로 번역하려면 번역자가 해당 문자열의 의미나 문맥에 대한 정보가 필요할 수 있습니다.
이 경우에는 `i18n` 어트리뷰트에 해당 문자열에 대한 _설명_ 을 추가하면 됩니다:

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-desc" header="src/app/app.component.html"></code-example>

이 정보는 문자열이 원래 사용된 문맥과 어긋나지 않게 번역을 하는 용도로 사용됩니다.
`i18n` 어트리뷰트에 설명을 추가할 때는 _단어의 의미_ 와 _추가 설명_ 을 파이프 기호(`|`)로 연결해서 `<의미>|<설명>`이라고 작성하면 됩니다.

위에서 살펴본 예제에서 `<h1>` 태그는 웹사이트의 헤더이며, 다른 텍스트 섹션에도 사용된다는 의미를 지정하려면 다음과 같이 지정하면 됩니다:

<code-example path="i18n/doc-files/app.component.html" region="i18n-attribute-meaning" header="src/app/app.component.html"></code-example>

이렇게 지정하면 이후에 번역자가 `site header`라고 지정된 문자열을 번역할 때 비슷한 맥락이나 무게감으로 번역하도록 신경쓸 수 있습니다.


{@a transaction-unit-ids}

<!--
<div class="callout is-helpful">
<header>How meanings control text extraction and merging</header>

The Angular extraction tool (described in [Work with translation files](#ng-xi18n) in this guide) generates a translation unit entry for each `i18n`
attribute in a template.
It assigns each translation unit a unique ID based on the _meaning_ and _description_.

The same text elements with different _meanings_ are extracted with separate IDs.
For example, if the word "right" appears with the meaning `correct` (as in "You are right") in one place, and with the meaning `direction` (as in "Turn right") in another place, the word is translated differently and merged back into the app as different translation entries.

If the same text elements have different _descriptions_ but the same _meaning_, they are extracted only once, with only one ID. That one translation entry is merged back into the app wherever the same text elements appear.

</div>
-->
<div class="callout is-helpful">
<header>텍스트가 추출되는 방식</header>

아래 [번역 파일 작업하기](#ng-xi18n)에서 다루겠지만, Angular 번역문구 추출 툴은 템플릿에 사용된 `i18n` 어트리뷰트 단위로 문자열을 추출합니다.
그리고 이 때 이 어트리뷰트에 지정된 _의미_ 와 _설명_ 을 바탕으로 고유한 ID를 할당합니다.

그래서 같은 문자열이라도 다른 _의미_ 로 사용되면 서로 다른 ID가 할당됩니다.
"right"라는 단어는 "You are right"라고 사용되면 "맞다"는 의미지만, "Turn right"라고 사용되면 "오른쪽"이라는 의미이기 때문에 두 단어는 상황에 따라 다르게 번역되어야 합니다.

_설명_ 이 다르지만 _의미_ 가 같은 문자열은 동일한 ID로 한 번만 추출됩니다.

</div>


{@a no-element}

<!--
### Translate text not for display
-->
### 화면에 표시되지 않는 문구 번역하기

<!--
While you can translate non-displayed text using a `<span>` tag, you are creating a new DOM element. To avoid doing so, wrap the text in an `<ng-container>` element, which is transformed into a non-displayed HTML comment as shown in this example:

<code-example path="i18n/src/app/app.component.html" region="i18n-ng-container"></code-example>
-->
화면에 표시되지 않는 문자열이라도 `<span>` 태그를 사용하면 DOM에 추가할 수 있습니다.
하지만 화면에 표시되지 않는 HTML 주석은 `<ng-container>` 엘리먼트를 사용하는 것이 더 좋습니다:

<code-example path="i18n/src/app/app.component.html" region="i18n-ng-container"></code-example>


{@a translate-attributes}

<!--
### Mark element attributes for translations
-->
### 번역할 엘리먼트 어트리뷰트 지정하기

<!--
HTML attributes such as `title` include text that should be translated along with the rest of the displayed text in the template.
The following example shows an image with a `title` attribute:

<code-example path="i18n/doc-files/app.component.html" region="i18n-title" header="src/app/app.component.html"></code-example>

To mark an attribute for translation, add `i18n-`*attribute* in which *attribute* is the attribute to translate.
The following example shows how to mark the
`title` attribute on the `img` tag by adding `i18n-title`:

<code-example path="i18n/src/app/app.component.html" region="i18n-title-translate" header="src/app/app.component.html"></code-example>

You can use `i18n-`*attribute* with any attribute of any element.
You also can assign a meaning, description, and custom ID with the `i18n-`*attribute*`="<meaning>|<description>@@<id>"` syntax.
-->
HTML 템플릿에 있는 문자열 외에 `title`과 같은 어트리뷰트를 번역해야 할 수도 있습니다.
이미지 태그에 `title` 어트리뷰트가 이렇게 사용되었다고 합시다:

<code-example path="i18n/doc-files/app.component.html" region="i18n-title" header="src/app/app.component.html"></code-example>

이 어트리뷰트를 번역할 대상으로 지정하려면 원래 어트리뷰트 이름 앞에 `i18n-` 접두사를 붙이면 됩니다.
그래서 예제처럼 `title` 어트리뷰트를 번역할 대상으로 지정하려면 `title` 어트리뷰트 대신 `i18n-title` 어트리뷰트를 사용하면 됩니다:

<code-example path="i18n/src/app/app.component.html" region="i18n-title-translate" header="src/app/app.component.html"></code-example>

`i18n-` 접두사는 모든 엘리먼트 어트리뷰트에 사용할 수 있습니다.
`i18n-` 접두사가 추가된 어트리뷰트 값도 `i18n-`*어트리뷰트*`="<의미>|<설명>@@<id>"`라는 문법으로 사용합니다.


{@a plurals-alternates}

<!--
### Mark plurals and alternates for translation
-->
### 복수 표현식, 대체 표현식 지정하기

<!--
Different languages have different pluralization rules and grammatical constructions that can make translation difficult.
To simplify translation, use International Components for Unicode (ICU) clauses with regular expressions, such as `plural` to mark the uses of plural numbers, and `select` to mark alternate text choices.

<div class="alert is-helpful">

The ICU clauses adhere to the [ICU Message Format](http://userguide.icu-project.org/formatparse/messages "ICU Message Format") specified in the [CLDR pluralization rules](http://cldr.unicode.org/index/cldr-spec/plural-rules "Pluralization Rules").

</div>
-->
언어가 다르면 복수를 표현하는 방법이나 문법 구성이 다를 수 있습니다.
이 때문에 번역이 더 복잡해지는데, 이 과정을 좀 더 편하게 하려면 국제 유니코드 컴포넌트(International Components for Unicode, ICU)가 정의한 정규 표현식을 활용하면 됩니다.
이 때 복수 표현식은 `plural` 절과을 사용하며 대체 표현식은 `select` 절을 사용합니다.

<div class="alert is-helpful">

자세한 내용은 [CLDR 복수표현식 규칙](http://cldr.unicode.org/index/cldr-spec/plural-rules "Pluralization Rules") 문서와 [ICU 메시지 포맷](http://userguide.icu-project.org/formatparse/messages "ICU Message Format") 문서를 참고하세요.

</div>


{@a plural-ICU}

<!--
#### Mark plurals
-->
#### 복수 표현식 지정하기

<!--
Use the `plural` clause to mark expressions that may not be meaningful if translated word-for-word.

For example, if you want to display "updated x minutes ago" in English, you may want to display "just now", "one minute ago", or "_x_ minutes ago" (with _x_ as the actual number).
Other languages might express this cardinality differently.
The following example shows how to use a `plural` clause to express these three options:

<code-example path="i18n/src/app/app.component.html" region="i18n-plural" header="src/app/app.component.html"></code-example>

In the above example:

* The first parameter, `minutes`, is bound to the component property (`minutes`), which determines the number of minutes.

* The second parameter identifies this as a `plural` translation type.

* The third parameter defines a pattern of pluralization categories and their matching values:
  * For zero minutes, use `=0 {just now}`.
  * For one minute, use `=1 {one minute}`.
  * For any unmatched cardinality, use `other {{{minutes}} minutes ago}`.
  You can use HTML markup and [interpolations](guide/glossary#interpolation "Definition of interpolation") such as `{{{minutes}}` with the `plural` clause in expressions.
  * After the pluralization category, put the default text (English) within braces (`{}`).

Pluralization categories include (depending on the language):

* `=0` (or any other number)
* `zero`
* `one`
* `two`
* `few`
* `many`
* `other`

<div class="callout is-important">
<header>Locales may not support some pluralization categories</header>

Many locales don't support some of the pluralization categories.
For example, the default locale (`en-US`) and other locales (such as `es`) have very simple `plural()` functions that don't support the `few` category.
The following shows the [en-US](https://github.com/angular/angular/blob/ecffc3557fe1bff9718c01277498e877ca44588d/packages/core/src/i18n/locale_en.ts#L15-L18) `plural()` function:

```
function plural(n: number): number {
  let i = Math.floor(Math.abs(n)), v = n.toString().replace(/^[^.]*\.?/, '').length;
  if (i === 1 && v === 0) return 1;
  return 5;
}
```

The function will only ever return 1 (`one`) or 5 (`other`).
The `few` category will never match.
If none of the pluralization categories match, Angular will try to match `other`.
Use `other` as the standard fallback for a missing category.

For more information about pluralization categories, see [Choosing plural category names](http://cldr.unicode.org/index/cldr-spec/plural-rules#TOC-Choosing-Plural-Category-Names) in the CLDR - Unicode Common Locale Data Repository.

</div>
-->
단어 하나를 번역하는 경우에는 `plural` 절이 큰 의미가 없습니다.

영어로 "updated x minutes ago"라고 표시되는 문구가 있는데, 이 문구는 때에 따라 "just now"라고 사용되기도 하고, "one minute ago"라고 사용되기도 하며 "_x_ minutes ago"(_x_ 는 실제 숫자)라고 사용될 수도 있습니다.
언어에 따라 가짓수는 더 많아질 수 있습니다.
이 3가지 경우만 다룬다면 `plural` 절을 다음과 같이 작성하면 됩니다:

<code-example path="i18n/src/app/app.component.html" region="i18n-plural" header="src/app/app.component.html"></code-example>

위 예제 코드에서:

* 첫 번째 변수 `minutes`는 컴포넌트 프로퍼티 `minutes`와 연결되는 실제 분단위 숫자를 의미합니다.

* 두 번째 변수는 해당 문구가 `plural` 번역 타입이라는 것을 의미합니다.

* 세번째 변수는 복수 표현식이 어떻게 구성되는지 구성합니다:
  * 0분을 표시하려면 `=0 {just now}`라고 작성합니다.
  * 1분을 표시하려면 `=1 {one minute}`라고 작성합니다.
  * 위 조건에 해당되지 않으면 `other {{{minutes}} minutes ago}`라고 작성합니다.
  이 문법은 HTML 마크업 문법과 [문자열 바인딩(interpolation)](guide/glossary#interpolation "Definition of interpolation"), `plural` 절이 조합된 형태입니다.

복수표현식의 형태는 이렇게 분류할 수 있습니다(언어에 따라 다릅니다):

* `=0` (또는 특정 숫자)
* `zero`
* `one`
* `two`
* `few`
* `many`
* `other`

<div class="callout is-important">
<header>언어에 따라 복수표현식 분류를 제공하지 않을 수도 있습니다.</header>

대부분의 언어는 복수표현식 분류를 제공하지 않습니다.
예를 들어 기본 지역 코드(`en-US`)나 `es` 같은 일부 지역 코드는 `few` 분류를 지원하지 않기 때문에 아주 간단한 `plural()` 함수를 정의해서 이 분류를 추가해야 합니다.
아래 코드는 [en-US](https://github.com/angular/angular/blob/ecffc3557fe1bff9718c01277498e877ca44588d/packages/core/src/i18n/locale_en.ts#L15-L18) `plural()` 함수의 코드입니다:

```
function plural(n: number): number {
  let i = Math.floor(Math.abs(n)), v = n.toString().replace(/^[^.]*\.?/, '').length;
  if (i === 1 && v === 0) return 1;
  return 5;
}
```

이 함수는 1(`one`)을 반환하거나 5(`other`)를 반환합니다.
그래서 `few` 분류는 둘 중에 어느것에도 매칭되지 않습니다.
복수표현식의 분류와 매칭되지 않으면 해당 표현식은 표준 폴백 분류인 `other`와 매칭됩니다.

복수표현식 분류에 대해 자세하게 알아보려면 유니코드 공통 지역 코드 데이터 저장소가 제공하는 [복수표현식 분류 이름 정하기](http://cldr.unicode.org/index/cldr-spec/plural-rules#TOC-Choosing-Plural-Category-Names) 문서를 참고하세요.

</div>


{@a select-ICU}
{@a nesting-ICUS}

<!--
### Mark alternates and nested expressions
-->
### 대체 표현식, 중첩 표현식 지정하기

<!--
If you need to display alternate text depending on the value of a variable, you
need to translate all of the alternates.

The `select` clause, similar to the `plural` clause, marks choices for alternate text based on your defined string values.
For example, the following clause in the component template binds to the component's `gender` property, which outputs one of the following string values: "male", "female" or "other".
The clause maps those values to the appropriate translations:

<code-example path="i18n/src/app/app.component.html" region="i18n-select" header="src/app/app.component.html"></code-example>

You can also nest different clauses together, such as the `plural` and `select` clauses in the following example:

<code-example path="i18n/src/app/app.component.html" region="i18n-nested" header="src/app/app.component.html">
</code-example>
-->
값에 따라 다른 문자열이 표시된다면, 이 문자열도 모두 번역되어야 합니다.

`select` 절은 `plural` 절과 비슷합니다.
`select` 절은 사전에 정의해둔 문자열 중에서 어느 하나를 선택할 때 사용됩니다.
아래 코드는 컴포넌트 클래스에 있는 `gender` 프로퍼티를 템플릿에 바인딩하는데, 이 프로퍼티 값에 따라 "male", "female", "other"라는 문자열을 화면에 표시합니다.
그렇다면 대체 표현식을 이렇게 정의할 수 있습니다.

<code-example path="i18n/src/app/app.component.html" region="i18n-select" header="src/app/app.component.html"></code-example>

`plural` 절과 `select` 절은 동시에 사용할 수도 있습니다:

<code-example path="i18n/src/app/app.component.html" region="i18n-nested" header="src/app/app.component.html">
</code-example>


{@a ng-xi18n}
{@a ng-xi18n-options}
{@a translate}

<!--
## Work with translation files
-->
## 번역 파일 작업하기

<!--
After preparing a template for translation, use the Angular CLI `extract-i18n` command to extract the marked text in the template into a _source language_ file.
The marked text includes text marked with `i18n` and attributes marked with `i18n-`*attribute* as described in the previous section.
Follow these steps:

1. [Extract the source language file](#create-source).
You can optionally change the location, format, and name.
2. [Create a translation file for each language](#localization-folder) by copying the source language file.
3. [Translate each translation file](#translate-text-nodes).
4. [Translate plurals and alternate expressions](#translate-plural-select) separately.
-->
템플릿 파일 작업을 끝내면 Angular CLI 명령 중 `extract-i18n`을 실행해서 번역할 대상으로 지정한 문자열을 _소스 언어_ 파일로 추출해야 합니다.
이 명령을 실행하면 `i18n`이 지정된 문자열과 `i18n-`*어트리뷰트*가 모두 파일로 추출됩니다.
번역과정은 이렇습니다:

1. [소스 언어 파일을 추출합니다.](#create-source)
2. 소스 파일을 복사해서 [개별 언어마다 번역 파일을 생성합니다.](#localization-folder)
3. [번역 파일을 모두 번역합니다.](#translate-text-nodes)
4. [복수 표현식과 대체 표현식을 번역합니다.](#translate-plural-select)


{@a create-source}

<!--
### Extract the source language file
-->
### 소스 언어 파일 추출하기

<!--
To extract the source language file, open a terminal window, change to the root directory of your app project, and run the following CLI command:

<code-example language="sh" class="code-shell">
  ng extract-i18n
</code-example>

The `extract-i18n` command creates a source language file named `messages.xlf` in your project's root directory using the [XML Localization Interchange File Format (XLIFF, version 1.2)](https://en.wikipedia.org/wiki/XLIFF "Wikipedia page about XLIFF").

Use the following `extract-i18n` command options to change the source language file location, format, and file name:

* `--output-path`: Change the location.
* `--format`: Change the format.
* `--outFile`: Change the file name.

Note: The `--i18n-locale` option is deprecated.
Angular 9 uses the source locale configured in your app's [workspace configuration](guide/workspace-config "Angular workspace configuration") file (`angular.json`).
-->
소스 언어 파일을 추출하려면 터미널 창을 열고 애플리케이션 프로젝트 최상위 폴더로 이동한 뒤에 Angular CLI 명령을 실행하면 됩니다:

<code-example language="sh" class="code-shell">
  ng extract-i18n
</code-example>

이 명령을 실행하면 프로젝트 최상위 폴더에 `messages.xlf`라는 이름으로 소스 언어 파일이 생성됩니다.
이 파일은 [XML 지역화 교환 파일 포맷(XML Localization Interchange File Format, XLIFF)](https://en.wikipedia.org/wiki/XLIFF "Wikipedia page about XLIFF") 형식입니다.

`extract-i18n` 명령을 실행할 때 옵션을 지정하면 소스 파일의 위치, 형식, 파일 이름을 지정할 수 있습니다:

* `--output-path`: 파일 위치를 지정합니다.
* `--format`: 파일 형식을 변경합니다.
* `--outFile`: 파일 이름을 변경합니다.

참고: `--i18n-locale` 옵션은 지원이 중단되었습니다.
Angular 9부터는 기본 지역을 [워크스페이스 환경설정 파일](guide/workspace-config "Angular workspace configuration") `angular.json`에 지정합니다.


<!--
#### Change the source language file location
-->
#### 소스 언어 파일 위치 변경하기

<!--
To create a file in the `src/locale` directory, specify the output path as an option, as shown in the following example:

<code-example language="sh" class="code-shell">
  ng extract-i18n --output-path src/locale
</code-example>
-->
소스 언어 파일을 기본 위치 대신 `src/locale` 폴더에 생성하려면 다음과 같이 `--output-path` 옵션을 지정하면 됩니다:

<code-example language="sh" class="code-shell">
  ng extract-i18n --output-path src/locale
</code-example>


{@a other-formats}

<!--
#### Change the source language file format
-->
#### 소스 언어 파일 형식 변경하기

<!--
The `extract-i18n` command can read and write files in three translation formats:

* XLIFF 1.2 (default)
* XLIFF 2
* [XML Message Bundle (XMB)](http://cldr.unicode.org/development/development-process/design-proposals/xmb)

Specify the translation format explicitly with the `--format` command option, as shown in the following examples:

<code-example language="sh" class="code-shell">
ng extract-i18n  --format=xlf
ng extract-i18n  --format=xlf2
ng extract-i18n  --format=xmb
</code-example>

<div class="alert is-helpful">

  XLIFF files use the extension `.xlf`.
  The XMB format generates `.xmb` source language files but uses`.xtb` (XML Translation Bundle: XTB) translation files.

</div>
-->
`extract-i18n` 명령은 세가지 번역 형식을 지원합니다:

* XLIFF 1.2 (기본값)
* XLIFF 2
* [XML 메시지 번들(XML Message Bundle, XMB)](http://cldr.unicode.org/development/development-process/design-proposals/xmb)

`extract-i18n` 명령을 실행하면서 `--format` 옵션을 지정하면 소스 언어 파일의 형식을 변경할 수 있습니다:

<code-example language="sh" class="code-shell">
ng extract-i18n  --format=xlf
ng extract-i18n  --format=xlf2
ng extract-i18n  --format=xmb
</code-example>

<div class="alert is-helpful">

XLIFF 파일 확장자는 `.xlf` 입니다.
그리고 XMB 파일의 확장자는 `.xmb`이며, XML 번역 번들(XML Translation Bundle, XTB) 파일의 확장자는 `.xtb` 입니다.

</div>


<!--
#### Change the source language file name
-->
#### 소스 언어 파일 이름 변경하기

<!--
To change the name of the source language file generated by the extraction tool, use
the `--outFile` command option:

<code-example language="sh" class="code-shell">
  ng extract-i18n --out-file source.xlf
</code-example>
-->
소스 언어 파일의 이름을 변경하려면 `--outFile` 옵션을 지정하면 됩니다:

<code-example language="sh" class="code-shell">
  ng extract-i18n --out-file source.xlf
</code-example>


{@a localization-folder}

<!--
### Create a translation file for each language
-->
### 언어마다 번역 파일 생성하기

<!--
The `ng extract-i18n` command (with no options) generates a source language file named `messages.xlf` in the project `src` folder.
Create *translation* files for each language by copying the source language file.
To avoid confusion with multiple translations, you should organize the language translation files by locale in a dedicated `locale` folder under `src/`.
Use a filename extension that matches the associated locale, such as `messages.fr.xlf`.

For example, to create a French translation file, follow these steps:

1. Make a copy of the `messages.xlf` source language file.
2. Put the copy in the `src/locale` folder.
3. Rename the copy to `messages.fr.xlf` for the French language (`fr`) translation.
Send this translation file to the translator.

Repeat the above steps for each language you want to add to your app.
-->
`ng extract-i18n` 명령을 옵션없이 실행하면 프로젝트 `src` 폴더에 `messages.xlf`라는 이름으로 소스 언어 파일이 생성됩니다.
그러면 이 파일을 복사해서 개별 *번역* 파일을 생성하면 됩니다.
번역 작업을 수월하게 하려면 이 번역 파일들은 `src/` 폴더 아래 `locale` 폴더를 만들고 이 폴더 안에 두는 것이 좋습니다.
그리고 번역 파일의 확장자에 해당 번역 파일의 지역 ID를 지정해서 `messages.fr.xlf`와 같이 지정하면 됩니다.

예를 들어 프랑스어 번역 파일을 만든다고 하면 이렇게 하면 됩니다:

1. 소스 언어 파일 `messages.xlf`를 복사합니다.
2. 복사한 파일을 `src/locale` 폴더로 옮깁니다.
3. 이 파일의 이름에 프랑스어 지역 ID `fr`를 붙여서 `messagaes.fr.xlf`라고 변경합니다.

이제 번역자에게 이 파일을 전달하면 됩니다.

지원하는 언어가 더 있다면 이 과정을 반복하면 됩니다.


{@a translate-text-nodes}

<!--
### Translate each translation file
-->
### 번역 파일 작업하기

<!--
Unless you are fluent in the language and have the time to edit translations, you would likely send each translation file to a translator, who would then use an XLIFF file editor to create and edit the translation.

To demonstrate this process, see the `messages.fr.xlf` file in the <live-example></live-example>, which includes a French translation you can edit without a special XLIFF editor or knowledge of French.
Follow these steps:

1. Open `messages.fr.xlf` and find the first `<trans-unit>` element. This is a *translation unit*, also known as a *text node*, representing the translation of the `<h1>` greeting tag that was previously marked with the `i18n` attribute:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello-before" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

> The `id="introductionHeader""` is a [custom ID](#custom-id "Manage marked text with custom IDs"), but without the `@@` prefix required in the source HTML.

2. Duplicate the `<source>...</source>` element in the text node, rename it `target`, and then replace its content with the French text:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;, after translation)"></code-example>

> In a more complex translation, the information and context in the [description and meaning elements](#help-translator "Add helpful descriptions and meanings") described previously would help you choose the right words for translation.

3. Translate the other text nodes the same way as shown in the following example:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-other-nodes" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

<div class="alert is-important">

  Don't change the IDs for translation units.
  Each `id` is generated by Angular and depends on the content of the template text and its assigned meaning.
  If you change either the text or the meaning, then the `id` changes.
  For more about managing text updates and IDs, see the previous section on [custom IDs](#custom-id "Manage marked text with custom IDs").

</div>
-->
번역하려는 언어에 유창하고 번역할 시간도 충분하지 않은 이상 번역 파일은 해당 언어를 번역하는 번역자에게 전달하는 것이 좋습니다.
번역자는 XLIFF 파일 에디터를 사용해서 번역 파일을 작업할 것입니다.

이 과정을 체험해보기 위해 <live-example></live-example>에서 `messages.fr.xlf` 파일을 확인해 봅시다.
별다른 XLIFF 에디터나 프랑스어 지식이 없어도 파일을 열어보는 것은 가능합니다.
이 파일은 이렇게 작업합니다:

1. `messages.fr.xlf` 파일을 열고 첫 번째 `<trans-unit>` 엘리먼트를 찾습니다.
이 엘리먼트가 *번역 단위(translation unit)*이며, *텍스트 노드*이기도 합니다.
이 노드는 이전 섹션에서 `i18n` 어트리뷰트를 지정했던 `<h1>` 엘리먼트의 문자열에 대한 설명이 들어있습니다:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello-before" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

> `id="introductionHeader""`는 [커스텀 ID](#custom-id "Manage marked text with custom IDs")지만, 소스 HTML에 필요한 `@@` 접두사가 없습니다.

2. 텍스트 노드 안에 있는 `<source>...</source>` 엘리먼트를 복사하고 새로운 엘리먼트의 이름을 `target`이라고 변경한 후에, 프랑스어 번역문을 추가합니다:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-hello" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;, 번역 후)"></code-example>

> 번역할 문구가 복잡하다면 이전 섹션에서 언급했던 [엘리먼트 설명이나 추가 의미](#help-translator "Add helpful descriptions and meanings")가 도움이 될 것입니다.

3. 같은 방식으로 다른 텍스트 노드도 번역합니다:

> <code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-other-nodes" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

<div class="alert is-important">

번역 단위의 ID를 변경하지 마세요.
이 ID는 Angular가 생성한 것이며 이 ID를 기준으로 템플릿의 문자열과 의미를 구분합니다.
그래서 문구나 의미를 수정하면 `id`도 변경됩니다.
번역할 문구와 ID를 관리하는 방법에 대해 자세하게 알아보려면 이전에 다뤘던 [커스텀 ID](#custom-id "Manage marked text with custom IDs") 섹션을 참고하세요.

</div>


{@a translate-plural-select}

### Translate plurals and alternate expressions

The [`plural` and `select` ICU expressions](#plurals-alternates "Mark plurals and alternates for translation") are extracted as additional messages, so you must translate them separately.

{@a translate-plural}

#### Translate plurals

To translate a `plural`, translate its ICU format match values as shown in the following example:

* `just now`
* `one minute ago`
* `<x id="INTERPOLATION" equiv-text="{{minutes}}"/> minutes ago`

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-plural" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

You can add or remove plural cases as needed for each language.

<div class="alert is-helpful">

For language plural rules, see
[CLDR plural rules](http://www.unicode.org/cldr/charts/latest/supplemental/language_plural_rules.html "CLDR Charts to view the Common Locale Data Repository data").

</div>

{@a translate-select}

#### Translate alternate expressions

Angular also extracts alternate `select` ICU expressions as separate translation units.
The following shows a `select` ICU expression in the component template:

<code-example path="i18n/src/app/app.component.html" region="i18n-select" header="src/app/app.component.html"></code-example>

In this example, Angular extracts the expression into two translation units. The first contains the text outside of the `select` clause, and uses a placeholder for `select` (`<x id="ICU">`):

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-select-1" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

<div class="alert is-important">

When translating the text, you can move the placeholder if necessary, but don't remove it.
If you remove the placeholder, the ICU expression will not appear in your translated app.

</div>

The second translation unit contains the `select` clause:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-select-2" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

The following example shows both translation units after translating:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translated-select" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

{@a translate-nested}

#### Translate nested expressions

Angular treats a nested expression in the same manner as an alternate expression, extracting it into two translation units. The first contains the text outside of the nested expression:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested-1" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

The second translation unit contains the complete nested expression:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested-2" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

The following example shows both translation units after translating:

<code-example path="i18n/doc-files/messages.fr.xlf.html" region="translate-nested" header="src/locale/messages.fr.xlf (&lt;trans-unit&gt;)"></code-example>

{@a merge}
{@a merge-aot}

## Merge translations into the app

To merge the completed translations into the app, use the [Angular CLI](guide/glossary#command-line-interface-cli "Definition of CLI") to build a copy of the app's distributable files for each locale.
The build process replaces the original text with translated text, and sets the `LOCALE_ID` token for each distributable copy of the app.
It also loads and registers the locale data.

After merging, you can serve each distributable copy of the app using server-side language detection or different subdirectories, as described in the next section about [deploying multiple locales](#deploy-locales).

The build process uses [ahead-of-time (AOT) compilation](guide/glossary#ahead-of-time-aot-compilation) to produce a small, fast,
ready-to-run app. With Ivy in Angular version 9, AOT is used by default for both
development and production builds, and AOT is required to localize component templates.

<div class="alert is-helpful">

For a detailed explanation the build process, see [Building and serving Angular apps](guide/build "Building and serving Angular apps").
This build process works for translation files in the `.xlf` format or in another format that Angular understands, such as `.xtb`.

</div>

<div class="alert is-important">

Ivy does not support merging i18n translations when using JIT mode.
If you [disable Ivy](guide/ivy#opting-out-of-ivy-in-version-9) and are using JIT mode, see [merging with the JIT compiler](https://v8.angular.io/guide/i18n#merge-with-the-jit-compiler "Merge with the JIT compiler").

</div>

To build a separate distributable copy of the app for each locale, [define the locales in the build configuration](#localize-config) in your project's workspace configuration file [`angular.json`](guide/workspace-config "Angular workspace configuration").
This method shortens the build process by removing the requirement to perform a full app build for each locale.

You can then [generate app versions for each locale](#localize-generate) using the `"localize"` option in `angular.json`. You can also [build from the command line](#localize-build-command) using the Angular CLI [`build`](/cli/build "CLI reference for ng build") command with the `--localize` option.

<div class="alert is-helpful">

You can optionally [apply specific build options for just one locale](#localize-build-one-locale) for a custom locale configuration.

</div>

{@a localize-config}

### Define locales in the build configuration

Use the `i18n` project option in your app's build configuration file ([`angular.json`](guide/workspace-config "Angular workspace configuration")) to define locales for a project.
The following sub-options identify the source language and tell the compiler where to find supported translations for the project:

* `sourceLocale`: The locale you use within the app source code (`en-US` by default)
* `locales`: A map of locale identifiers to translation files

For example, the following excerpt of an `angular.json` file sets the source locale to `en-US` and provides the path to the `fr` (French) locale translation file:

<code-example language="json" header="angular.json">
...
"projects": {
  "angular.io-example": {
    ...
    "i18n": {
      "sourceLocale": "en-US",
      "locales": {
        "fr": "src/locale/messages.fr.xlf"
      }
    },
    "architect": {
    ...
    }
}
</code-example>

{@a localize-generate}

### Generate app versions for each locale

To use your locale definition in the build configuration, use the `"localize"` option in `angular.json` to tell the CLI which locales to generate for the build configuration:

* Set `"localize"` to `true` for *all* the locales previously defined in the build configuration.
* Set `"localize"` to an array of a subset of the previously-defined locale identifiers to build only those locale versions.
* Set `"localize"` to `false` to disable localization and not generate any locale-specific versions.

<div class="alert is-helpful">

Note: [Ahead-of-time (AOT) compilation](guide/glossary#ahead-of-time-aot-compilation) is required to localize component templates.
If you changed this setting, set `"aot"` to `true` in order to use AOT.

</div>

The following example shows the `"localize"` option set to `true` in `angular.json` so that all locales defined in the build configuration are built:

<code-example language="json" header="angular.json">
"build": {
  "builder": "@angular-devkit/build-angular:browser",
  "options": {
    "localize": true,
    "aot": true,
    ...
</code-example>

<div class="alert is-helpful">

Due to the deployment complexities of i18n and the need to minimize rebuild time, the development server only supports localizing a single locale at a time.
Setting the `"localize"` option to `true` will cause an error when using `ng serve` if more than one locale is defined.
Setting the option to a specific locale, such as `"localize": ["fr"]`, can work if you want to develop against a specific locale (such as `fr`).

</div>

The CLI loads and registers the locale data, places each generated version in a locale-specific directory to keep it separate from other locale versions, and puts the directories within the configured `outputPath` for the project.
For each application variant the `lang` attribute of the `html` element is set to the locale.
The CLI also adjusts the HTML base HREF for each version of the app by adding the locale to the configured `baseHref`.

You can set the `"localize"` property as a shared configuration that all the configurations effectively inherit (or can override).

{@a localize-build-command}

### Build from the command line

You can also use the `--localize` option with the [`ng build`](/cli/build "CLI reference for ng build") command and your existing `production` configuration.
The CLI builds all locales defined in the build configuration, which is similar to setting the `"localize"` option to `true` as described in the previous section.

<code-example language="sh" class="code-shell">
  ng build --prod --localize
</code-example>

{@a localize-build-one-locale}

### Apply specific build options for just one locale

To apply specific build options to only one locale, you can create a custom locale-specific configuration by specifying a single locale as shown in the following example:

<code-example language="json" header="angular.json">
"build": {
  ...
  "configurations": {
    ...
    "fr": {
      "localize": ["fr"],
      "main": "src/main.fr.ts",
      ...
    }
  }
},
"serve": {
  ...
  "configurations": {
    ...
    "fr": {
      "browserTarget": "*project-name*:build:fr"
    }
  }
}
</code-example>

You can then pass this configuration to the `ng serve` or `ng build` commands.
The following shows how to serve the French language file created in the example for this guide:

<code-example language="sh" class="code-shell">
  ng serve --configuration=fr
</code-example>

<div class="alert is-important">

You can use the CLI development server (`ng serve`), but only with a single locale.

</div>

For production builds, you can use configuration composition to execute both configurations:

<code-example language="sh" class="code-shell">
  ng build --configuration=production,fr
</code-example>

<code-example language="json" header="angular.json">
...
"architect": {
  "build": {
    "builder": "@angular-devkit/build-angular:browser",
    "options": { ... },
    "configurations": {
      "fr": {
        "localize": ["fr"],
      }
    }
  },
  ...
  "serve": {
    "builder": "@angular-devkit/build-angular:dev-server",
    "options": {
      "browserTarget": "my-project:build"
    },
    "configurations": {
      "production": {
        "browserTarget": "my-project:build:production"
      },
      "fr": {
        "browserTarget": "my-project:build:fr"
      }
    }
  }
}
</code-example>

{@a missing-translation}

### Report missing translations

When a translation is missing, the build succeeds but generates a warning such as
`Missing translation for message "foo"`. You can configure the level of warning that is generated by the Angular compiler:

* `error`: Throw an error. If you are using AOT compilation, the build will fail.
If you are using JIT compilation, the app will fail to load.
* `warning` (default): Show a `Missing translation` warning in the console or shell.
* `ignore`: Do nothing.

Specify the warning level in the `options` section for the `build` target of your Angular CLI configuration file (`angular.json`). The following example shows how to set the warning level to `error`:

<code-example language="json" header="angular.json">
"options": {
  ...
  "i18nMissingTranslation": "error"
}
</code-example>

{@a deploy-locales}

## Deploy multiple locales

If `myapp` is the directory containing your app's distributable files, you would typically make available different versions for different locales in locale directories such as `myapp/fr` for the French version and `myapp.com/es` for the Spanish version.

The HTML `base` tag with the `href` attribute specifies the base URI, or URL, for relative links. If you set the `"localize"` option in `angular.json` to `true` or to an array of locale IDs, the CLI adjusts the base `href` for each version of the app by adding the locale to the configured `"baseHref"`. You can specify the `"baseHref"` for each locale in your workspace configuration file (`angular.json`), as shown in the following example, which sets `"baseHref"` to an empty string:

<code-example language="json" header="angular.json">
...
"projects": {
  "angular.io-example": {
    ...
    "i18n": {
      "sourceLocale": "en-US",
      "locales": {
        "fr": {
          "translation": "src/locale/messages.fr.xlf",
          "baseHref": "" 
        }
      }
    },
    "architect": {
    ...
    }
}
</code-example>

You can also use the CLI `--baseHref` option with [`ng build`](cli/build "CLI reference for ng build") to declare the base `href` at compile time.

Configuring servers for hosting multiple locales is outside the scope of this guide.
For details on how to deploy apps to a remote server, see [Deployment](guide/deployment "Deployment guide").

{@a app-pre-translation}

## Explore the translated example app

The following tabs show the example app and its translation files:

<code-tabs>
  <code-pane header="src/app/app.component.html" path="i18n/src/app/app.component.html">
  </code-pane>
  <code-pane header="src/app/app.component.ts" path="i18n/src/app/app.component.ts">
  </code-pane>
  <code-pane header="src/app/app.module.ts" path="i18n/src/app/app.module.ts">
  </code-pane>
  <code-pane header="src/main.ts" path="i18n/doc-files/main.1.ts">
  </code-pane>
  <code-pane header="src/locale/messages.fr.xlf" path="i18n/doc-files/messages.fr.xlf.html">
  </code-pane>
</code-tabs>

## Optional practices

The following are optional practices that may be required in special cases:

* [Set the source locale manually](#set-source-manually) by setting the [LOCALE_ID](api/core/LOCALE_ID "API reference for LOCALE_ID") token.
* [Import global variants of the locale data](#import-locale) for extra locale data.
* [Manage marked text with custom IDs](#custom-id) if you require more control over matching translations.

{@a set-source-manually}

<!--
### Set the source locale manually
-->
### 수동으로 지역 ID 설정하기

Angular already contains locale data for `en-US`.
The Angular CLI automatically includes the locale data and sets the `LOCALE_ID` value when you use the `--localize` option with [`ng build`](cli/build "ng build description").

To manually set an app's source locale to one other than the automatic value, follow these steps:

1. Look up the ID for the language-locale combination in [the Angular repository](https://github.com/angular/angular/tree/master/packages/common/locales "Common locales in the Angular repository").
2. Set the [`LOCALE_ID`](api/core/LOCALE_ID "API reference for LOCALE_ID") token.
The following example sets the value of `LOCALE_ID` to `fr` (French):

<code-example path="i18n/doc-files/app.module.ts" header="src/app/app.module.ts"></code-example>

{@a import-locale}

<!--
### Import global variants of the locale data
-->
### 지역 관련 데이터 로드하기

Angular will automatically include locale data if you configure the locale using the `--localize` option with [`ng build`](cli/build "ng build description") CLI command.

The [Angular repository](https://github.com/angular/angular/tree/master/packages/common/locales "Common locales in the Angular repository") files (`@angular/common/locales`) contain most of the locale data that you need, but some advanced formatting options require additional locale data.
Global variants of the locale data are available in [`@angular/common/locales/global`](https://github.com/angular/angular/tree/master/packages/common/locales/global "Global locale variants in the Angular repository").
The following example imports the global variants for French (`fr`):

<code-example language="javascript" header="app.module.ts">
import '@angular/common/locales/global/fr';
</code-example>

{@a custom-id}

<!--
### Manage marked text with custom IDs
-->
### 커스텀 ID로 번역 대상 문자열 관리하기

The Angular extractor generates a file with a translation unit entry for each `i18n`
attribute in a template.
As described previously (in [How meanings control text extraction and merging](#transaction-unit-ids)), Angular assigns each translation unit a unique ID such as the following:

<code-example path="i18n/doc-files/messages.fr.xlf.html" header="messages.fr.xlf.html" region="generated-id"></code-example>

When you change the translatable text, the extractor generates a new ID for that translation unit.
In most cases a text change would also require a change to the translation.
Therefore, using a new ID keeps the text change in sync with translations.

However, some translation systems require a specific form or syntax for the ID.
To address this requirement, you can mark text with _custom_ IDs.
While most developers don't need to use custom IDs, some may want to use IDs that have a unique syntax to convey additional metadata (such as the library, component, or area of the app in which the text appears).

Specify a custom ID in the `i18n` attribute by using the prefix `@@`.
The following example defines the custom ID `introductionHeader`:

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-solo-id' header='app/app.component.html'></code-example>

When you specify a custom ID, the extractor generates a translation unit with the custom ID:

<code-example path="i18n/doc-files/messages.fr.xlf.html" header="messages.fr.xlf.html" region="custom-id"></code-example>

If you change the text, the extractor does *not* change the ID.
As a result, you don't have to take the extra step of updating the translation.
The drawback of using custom IDs is that if you change the text, your translation may be out-of-sync with the newly changed source text.

#### Use a custom ID with a description

Use a custom ID in combination with a description and a meaning to further help the translator.
The following example includes a description, followed by the custom `id`:

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-id' header='app/app.component.html'></code-example>

The following example adds a meaning:

<code-example path='i18n/doc-files/app.component.html' region='i18n-attribute-meaning-and-id' header='app/app.component.html'></code-example>

#### Define unique custom IDs

Be sure to define custom IDs that are unique.
If you use the same ID for two different text elements, the extraction tool extracts only the first one, and Angular uses its translation in place of both original text elements.

For example, in the following code the same custom ID `myId` is defined for two different text elements:

  ```html
    <h3 i18n="@@myId">Hello</h3>
    <!-- ... -->
    <p i18n="@@myId">Good bye</p>
  ```

The following shows the translation to French:

  ```xml
    <trans-unit id="myId" datatype="html">
      <source>Hello</source>
      <target state="new">Bonjour</target>
    </trans-unit>
  ```

Both elements now use the same translation (`Bonjour`) because they were defined with the same custom ID:

  ```html
    <h3>Bonjour</h3>
    <!-- ... -->
    <p>Bonjour</p>
  ```
